# 外部設計書

## 履歴

|日付|内容|
|:----|:----|
|25/06/25|画面遷移図、HOME画面の仕様|
|||

## 画面遷移図

```
└── HOME
    ├── カルテ情報
    │   ├── 一覧
    │   ├── 詳細
    ├── スケジュール
    │   ├── デイリー
    │   ├── ウィクリー
    │   └── マンスリー
    ├── 診療予約
```

## テーブル設計

- 患者テーブル

| カラム名            | 型                            | 必須 | 説明           |
| ------------------ | ----------------------------- | ---- | ------------- |
| `id`               | number                        | ✅  | 主キー         |
| `name`             | string                        | ✅  | 患者氏名（例: 患者A）|
| `kana`             | string                        | ❌  | フリガナ（検索用）   |
| `age`              | number                        | ❌  | 年齢     |
| `duration`         | number                        | ✅  | 枠数（1枠=20分、例: 2）|
| `gender`           | string 　　　　　　　　　　　　 | ❌  | 性別 (Men, Female)  |
| `phone_number`     | string                        | ❌  | 電話番号            |
| `email`            | string                        | ❌  | メールアドレス      |
| `first_visit_date` | date                          | ❌  | 初診日             |
| `last_visit_date`  | date                          | ❌  | 最終来院日         |
| `memo`             | text                          | ❌  | 医師・スタッフ用の自由メモ |
| `created_at`       | datetime                      | ✅  | 登録日時          |
| `updated_at`       | datetime                      | ✅  | 更新日時          |

- 専門職テーブル

| カラム名          | 型              | 必須 | 説明            |
| ---------------- | ---------------- | ---- | ------------- |
| `id`             | number           | ✅   | 主キー           |
| `name`           | string           | ✅   | 医師氏名（例: 医師A）  |
| `kana`           | string           | ❌   | フリガナ（検索用）     |
| `specialty`      | number           | ❌   | 歯科医(1)、歯科衛生士(2) |
| `phone_number`   | number           | ❌   | 電話番号          |
| `email`          | string           | ❌   | メールアドレス       |


- 予約テーブル

| カラム名        | 型               |必須| 説明                        |
| -------------- | ---------------- | ---- | ------------------------- |
| `id`           | number           |✅   | 主キー                       |
| `patient_id`   | string           |✅   | 外部キー（`patients.id`）     |
| `specialty_id` | string           |✅   | 外部キー（`specialty.id`）      |
| `start_time`   | datetime         |✅   | 開始時刻（例: 2025-06-24 09:20） |
| `type`         | number           |✅   | 診療(1),カウンセリング(2)                  |
| `room_id`      | string           |✅   | 外部キー（`rooms.id`）          |

- 診療室テーブル

| カラム名 | 型     |必須| 説明               |
| ------- | ------ | ✅| ---------------- |
| `id`    | number | ✅| 主キー              |
| `name`  | string | ✅| 表示名（例: 診療台1、待合席） |
| `order` | number | ✅| 表の並び順に使用（0 = 左）  |
